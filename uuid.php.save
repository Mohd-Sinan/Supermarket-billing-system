<?php
session_start();

if (isset($_['uname']) && isset($_POST['password'])) {

    // Get the current time in 100-nanosecond intervals since 00:00:00 UTC on October 15, 1582
    $time = microtime(true) * 10000000 + 621355968000000000;

    // Get the MAC address of the machine
    $mac = strtoupper(substr(md5(uniqid(rand(), true)), 0, 12)); // Example MAC address
    $time_hi_and_version = ($time & 0x0FFF000000000000) >> 48 | (1 << 12); // Set version to 1

    // Generate the UUID
    $uuid = sprintf('%08x-%04x-%04x-%04x-%s',
        ($time & 0xFFFFFFFF),
        ($time >> 32) & 0xFFFF,
        $time_hi_and_version & 0xFFFF,
        random_int(0, 0x3FFF) | 0x8000, // Set bits 6 and 7 to indicate a random UUID
        substr($mac, 0, 12)
    );

    // Store the UUID in Session
    //$_SESSION['uuid'] = $uuid;
    echo json_encode(['uuid' => $uuid]);
}
?>
